<!-- SIDEBAR -->
<section id="sidebar" [ngClass]="status ? 'hide' : ''">
    <a href="/prof-dash" class="brand">
      <i class='bx bxs-smile'></i>
      <span class="text" >Admin Dashboard</span>
    </a>
    <ul class="side-menu top">
      <li class="active">
        <a >
          <i class='bx bxs-info-square' ></i>
          <span class="text">Information</span>
        </a>
      </li>
      <li>
        <a >
          <i class='bx bx-label'></i>
          <span class="text">Chiffres</span>
        </a>
      </li>
      <li>
        <a >
          <i class='bx bxs-dashboard' ></i>
          <span class="text">Répartition du Budget</span>
        </a>
      </li>
      <li>
        <a>
          <i class='bx bxs-building-house' ></i>
          <span class="text">Commandes</span>
        </a>
      </li>
      <li>
        <a >
          <i class='bx bxs-user' ></i>
          <span class="text">Professeurs membres</span>
        </a>
      </li>

    </ul>
      <ul class="side-menu">
        <li>
          <a href="#">
            <i class='bx bxs-cog' ></i>
            <span class="text">Paramètres</span>
          </a>
        </li>
        <li>
          <a href="#" class="logout">
            <i class='bx bxs-log-out-circle'  ></i>
            <span class="text">Se déconnecter</span>
          </a>
        </li>
      </ul>
    </section>
    <!-- SIDEBAR -->

    <!-- CONTENT -->
<section id="content">
    <!-- NAVBAR -->
    <nav>
      <i (click)="addToggle()" class='bx bx-menu' ></i>
    </nav>
    <!-- NAVBAR -->

    <!-- MAIN -->
    <main class="main" >
      <div class="head-title">
        <!-- <div class="left">
          <h1>Add Commande</h1>
        </div> -->
      </div>

      <section class="bg-grey" >
        <div class="grid grid-cols-1 lg:grid-cols-2">
            <div  class="flex items-center justify-center px-4 py-10 bg-white sm:px-6 lg:px-8 sm:py-16 lg:py-24">
                <div   class="xl:w-full xl:max-w-sm 2xl:max-w-md xl:mx-auto">
                    <h2 class="text-3xl font-bold leading-tight  sm:text-4xl" style="color: #4C86A7;">Ajouter des Produits </h2>
                    <form [formGroup]="newCommandForm"  class="mt-8">
                        <div formArrayName="newCommandLines" class="space-y-5">
                            <div *ngFor="let line of commandLines.controls; let i = index">
                              <div [formGroupName]="i">
                                <!-- Product line inputs -->
                                <hr style="border: none;height: 2px; background-color: #4C86A7; margin: 20px 0;">
                                <div>
                                  <label class="text-base font-medium text-gray-900" style="color: #FB8B03;">Nom du Produit</label>
                                  <div class="mt-2.5">
                                    <input
                                      type="text"
                                      id="productName"
                                      list="productList"
                                      formControlName="productName"
                                      placeholder="Exp: Ordinateur portable Dell XPS 15"
                                      class="block w-full p-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
                                      (change)="updateRubriqueName($event)"
                                    />
                                    <datalist id="productList">
                                      <option *ngFor="let s of listproducts" [value]="s.nom" ></option>
                                    </datalist>
                                  </div>
                                </div>

                                <div>
                                  <label class="text-base font-medium text-gray-900" style="color: #FB8B03;">Rubrique du Produit</label>
                                  <div class="mt-2.5">
                                    <input
                                      type="text"
                                      id="produitRubriqueId"
                                      formControlName="produitRubriqueId"
                                      placeholder="Achat de matériel informatique"
                                      class="block w-full p-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
                                      [value]="selectedProductRubrique"
                                      readonly
                                    />
                                  </div>
                                </div>



                                <div>
                                <div class="flex items-center justify-between">
                                    <label  class="text-base font-medium text-gray-900" style="color: #FB8B03;"> Prix HT (Dhs) </label>
                                    </div>
                                <div class="mt-2.5">
                                    <input
                                        type="number"
                                        id="prixHT"
                                        formControlName="prixHT"
                                        placeholder="Exp: 7550"
                                        class="block w-full p-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
                                    />
                                </div>
                            </div>

                            <div>
                                <div class="flex items-center justify-between">
                                    <label for="" class="text-base font-medium text-gray-900" style="color: #FB8B03;"> Prix TTC (Dhs) </label>
                                    </div>
                                <div class="mt-2.5">
                                    <input
                                        type="number"
                                        formControlName="prixTTC"
                                        id="prixTTC"
                                        placeholder="Exp: 10099"
                                        class="block w-full p-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
                                    />
                                </div>
                            </div>

                            <div>
                                <div class="flex items-center justify-between">
                                    <label for="" class="text-base font-medium text-gray-900" style="color: #FB8B03;"> Quantité </label>
                                    </div>
                                <div class="mt-2.5">
                                    <input
                                        type="number"
                                        formControlName="quantity"
                                        id="quantity"
                                        placeholder="Exp: 3"
                                        class="block w-full p-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
                                    />
                                </div>
                              </div>
                              </div>
                            </div>
                        </div>
                      <hr style="border: none;height: 2px; background-color: #4C86A7; margin: 20px 0;">
                      <div class="mt-3 space-y-3">
                        <button
                          type="button"
                          style="color: green;"
                          class="relative inline-flex items-center justify-center w-full px-4 py-4 text-base font-semibold text-gray-700 transition-all duration-200 bg-white border-2 border-gray-200 rounded-md hover:bg-gray-100 focus:bg-gray-100 hover:text-black focus:text-black focus:outline-none"
                          (click)="addNewCommandLine()"
                        >
                          <!-- <div class="absolute inset-y-0 left-0 p-4">
                          </div> -->
                          <i  class="fa-solid fa-square-plus" ></i> &nbsp; Ajouter un nouveau Produit
                        </button>

                        <button
                          type="button"
                          style="color: red;"
                          class="relative inline-flex items-center justify-center w-full px-4 py-4 text-base font-semibold text-gray-700 transition-all duration-200 bg-white border-2 border-gray-200 rounded-md hover:bg-gray-100 focus:bg-gray-100 hover:text-black focus:text-black focus:outline-none"
                          (click)="removeCommandLine()"
                        >
                          <!-- <div class="absolute inset-y-0 left-0 p-4">
                          </div> -->
                          <i style="color: red;" class="fa-solid fa-square-minus"></i> &nbsp; Retirer un Produit
                        </button>
                      </div>
                    </form>
                </div>
            </div>

          <div class="flex items-center justify-center px-4 py-10 sm:py-16 lg:py-24 bg-gray-50 sm:px-6 lg:px-8" style="max-height: 690px; overflow-y: auto; background-image: url('assets/images/shape.png'); background-size: cover; background-position: center;" >
            <div>
              <div class="w-full max-w-md mx-auto xl:max-w-xl" >
                <h3 class="text-2xl font-bold text-center text-black" style="color: #4C86A7;">ICI</h3>
                <p class="leading-relaxed text-center text-gray-700 mt-2.5">Vous pouvez ajouter ou retirer différents produits de votre bon de commande, puis le valider. <br> Si le produit ne figure pas sur la liste des produits, veuillez l'ajouter avant de procéder. </p>
                <div class="px-4 mx-auto max-w-7xl sm:px-6 lg:px-8">
                <div class="max-w-sm mx-auto mt-8 sm:mt-16">
                  <div class="space-y-3" >

                    <div class="overflow-hidden transition-all duration-200 bg-white border-2 border-green-600 rounded-md hover:bg-gray-50">
                      <div class="px-4 py-5 sm:p-6">
                        <div class="flex items-center">
                          <div>
                            <i style="font-size: 28px; color:#4C86A7" class="fa-solid fa-wallet"></i>
                          </div>
                          <label  class="ml-5 mr-auto">
                            <p class="text-xl font-semibold " style="color: #4C86A7;">{{ calculateTotal('quantity' , 'prixTTC') }} DHs</p>
                            <p class="text-l text-gray-600">TTC</p>
                          </label>
                          <span class="inline-block px-4 py-2 text-sm font-semibold text-green-600 bg-green-100 border border-green-600 rounded-full"> À payer </span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <button (click)="addCommande()" title="" style="margin-top: 8px;" class="inline-flex items-center justify-center w-full px-12 py-4 mt-6 font-semibold text-white transition-all duration-200 rounded-md bg-blue1 rounded-lg sm:mt-16 hover:bg-blue2 focus:bg-orange1" role="button"> Valider la Commande </button>

                </div>
              </div>
              </div>
            </div>
          </div>
        </div>
    </section>





    </main>
    <!-- MAIN -->
  </section>
  <!-- CONTENT -->
